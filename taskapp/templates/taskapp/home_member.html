{% extends "base.html" %}

{% block head_title %}Member Home{% endblock %}

{% block content %}
<div class="container-fluid pt-3">
    <div class="row">
        <div class="col-md-8 offset-md-2 text-center topbox">
            <h2>Welcome {{ user.profile.firstname|capfirst }}</h2>
            <h5>
                We have <strong>{{ tasks|length }}</strong> outstanding tasks outlined below<br>
            </h5>
            <a href="/todo" class="btn btn-primary">{{ user.profile.firstname|capfirst }}'s Todo Board</a>
            <a href="/create" class="btn btn-primary">Add New Task</a>
            <a href="/full" class="btn btn-primary">List All Tasks</a>
        </div>
    </div>
</div>    
<div class="table-responsive">
    <table class="table table-striped table-condensed"> 
        <thead>
            <tr>
                <th>Date</th>
                <th>Created By</th>
                <th>Category</th>
                <th>Task Description</th>  
            </tr>
        </thead>
        {% for task in tasks %}
            <tr>
                <td> {{ task.created_on|date:"d M" }} </td>
                <td> {{ task.created_by.profile.firstname|capfirst}} 
                     {{task.created_by.profile.surname|capfirst}}
                </td>
                <td> {{ task.get_category_display }} </td>
                <td> {{ task.description|capfirst }} </td>
            </tr>
        {% empty %}
            <tr>
                <td> {% now "d M" %} </td>
                <td> NO TASKS </td>
                <td> NO TASKS </td>
                <td>Do you need to
                    <a href="/create" class="btn btn-primary">Add a new Task</a>
            </tr>
        {% endfor %}
    </table>
</div>

{%endblock%}