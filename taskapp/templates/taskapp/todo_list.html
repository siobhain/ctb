{% extends "base.html" %}

{% block head_title %}Todo Community Task Board{% endblock %}

{% block content %}
<h1>The Todo List </h1>
<h4>Hello {{user|capfirst}}, Our Community has {{ tasks|length }} outstanding task(s)
    <br> To create a new task please <a href="/create"><button>Add</button></a>
    <br>Use <button>Update</button> and <button>Remove</button> in the table below for Tasks created by you
</h4>
<div class="table-responsive">
<table class="table table-striped table-condensed"> 
    <thead>
        <tr>
            <th>Date</th>
            <th>Action or Owner</th>
            <th>Category</th>
            <th>Description</th>  
        </tr>
    </thead>
    <tbody>  
        {% for task in tasks %}
            <tr>
                <td> {{ task.created_on|date:"d M" }} </td>
                <td>{% if task.created_by == user %}
                        <a href="/edit/{{ task.id }}"><button>Update</button></a>
                        <a href="/delete/{{ task.id }}"><button>Remove</button></a>
                    {% else %}
                        {{ task.created_by }}
                    {% endif %}
                </td>
                <td> {{ task.get_category_display }} </td>
                <td> {{ task }} </td>
            </tr>
        {% empty %}
            <td> {% now "d M" %} </td>
            <td> NO TASKS </td>
            <td> ON THE LIST </td>
            <td>I'm sure you can think of one to
                <a href="/create"><button>Add</button></a>
            </td>   
        {% endfor %}
    </tbody>
</table>
</div>

{%endblock%}